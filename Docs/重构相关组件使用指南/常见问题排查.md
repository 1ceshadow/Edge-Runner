# 常见问题排查指南

## Layer 相关问题

### 问题：玩家闪现穿墙、死亡区域不触发、广告牌吸附失效

**症状：**
- 玩家冲刺可以穿过墙壁
- 掉入死亡区域不会触发死亡
- 靠近广告牌没有吸附效果

**排查步骤：**

1. **检查 Layer 顺序是否被改变**
   - 在 Unity 中打开 **Edit > Project Settings > Tags and Layers**
   - 确认 Layer 列表顺序没有被修改
   - ⚠️ **重要**：修改 Layer 列表顺序会导致场景中所有使用该 Layer 的对象引用错乱！
   - 如果不小心改了顺序，需要手动修复所有受影响对象的 Layer 设置

2. **检查 Physics2D 碰撞矩阵**
   - 打开 **Edit > Project Settings > Physics 2D**
   - 滚动到底部找到 **Layer Collision Matrix**
   - 确保以下层之间的碰撞是启用的（勾选）：
     - `Player` ↔ `Wall`
     - `Player` ↔ `DeathZone`
     - `Player` ↔ `Billboard`
     - `Player` ↔ `Bullet`

3. **检查对象的 Layer 设置**
   - 选中 Player，确认其 Layer 正确
   - 选中墙壁，确认其 Layer 为 `Wall`
   - 选中死亡区域，确认其 Layer 为 `DeathZone`

---

## Rigidbody2D 相关问题

### 问题：玩家无法移动或物理行为异常

**排查步骤：**

1. **检查 Rigidbody2D 的 Body Type**
   - 选中 Player 对象
   - 在 Inspector 中找到 Rigidbody2D 组件
   - 确认 **Body Type** 设置为 **Dynamic**（不是 Kinematic 或 Static）
   
   | Body Type | 用途 |
   |-----------|------|
   | Dynamic | 正常物理模拟，受力移动 ✅ 玩家应该用这个 |
   | Kinematic | 只能通过代码移动，不受物理力影响 |
   | Static | 完全静止，不能移动 |

2. **检查 Rigidbody2D 其他设置**
   ```
   Gravity Scale: 0（俯视角游戏不需要重力）
   Interpolate: Interpolate（平滑移动）
   Constraints: Freeze Rotation Z（防止旋转）
   ```

---

## Collider 相关问题

### 问题：玩家与地面产生异常碰撞

**解决方案：**
- Ground（地面）对象**不应该**有 Collider2D 组件
- Ground 只是视觉装饰，不参与物理碰撞
- 只有墙壁、障碍物、死亡区域等需要 Collider

**正确配置：**
| 对象类型 | 是否需要 Collider | Layer |
|----------|------------------|-------|
| Player | ✅ CircleCollider2D | Player 或 Default |
| Wall | ✅ BoxCollider2D / TilemapCollider2D | Wall |
| Ground | ❌ 不需要 | Default |
| DeathZone | ✅ BoxCollider2D (Is Trigger) | DeathZone |
| Billboard | ✅ BoxCollider2D | Billboard |
| Enemy | ✅ CircleCollider2D | Enemy |

---

## 快速检查清单

当玩家行为异常时，按以下顺序检查：

- [ ] Player 的 Layer 是否正确
- [ ] Player 的 Rigidbody2D Body Type 是否为 Dynamic
- [ ] Layer 列表顺序是否被意外修改
- [ ] Physics2D 碰撞矩阵配置是否正确
- [ ] Ground 是否误加了 Collider（应该移除）
- [ ] 墙壁/死亡区域的 Layer 是否正确
